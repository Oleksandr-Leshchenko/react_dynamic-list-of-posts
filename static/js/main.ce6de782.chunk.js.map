{"version":3,"sources":["components/PostRenderer/PostRenderer.tsx","components/PostsList/PostsList.tsx","api/comments.ts","api/api.ts","api/posts.ts","components/PostComments/PostComments.tsx","components/NewCommentForm/NewCommentForm.tsx","components/PostDetails/PostDetails.tsx","api/users.ts","App.tsx","index.tsx"],"names":["PostRenderer","post","isSelected","setSelectedPostId","userId","title","type","className","onClick","id","PostsList","posts","selectedPostId","map","deleteComment","commentId","a","COMMENT_URL","fetch","method","addComment","comment","options","headers","body","JSON","stringify","BASE_URL","getUserPosts","ADDITIONAL_URL","response","json","getPostDetails","postId","getPostComments","console","error","PostComments","showComments","useState","comments","setComments","useEffect","fetchedComments","fetchData","length","NewCommentForm","emptyComment","name","email","setComment","handleInput","event","target","value","handleSubmit","preventDefault","onSubmit","placeholder","onChange","PostDetails","setShowComments","setPost","fetchedPost","getUsers","App","setPosts","users","setUsers","setUserId","Promise","all","fetchedPosts","fetchedUsers","user","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ce6de782.chunk.js","sourcesContent":["import React from 'react';\n\ninterface Props {\n  post: Post,\n  isSelected: boolean,\n  setSelectedPostId: React.Dispatch<React.SetStateAction<number>>,\n}\n\nexport const PostRenderer: React.FC<Props> = ({ post, isSelected, setSelectedPostId }) => {\n  return (\n    <>\n      <div>\n        <b>{`[User #${post.userId}]: `}</b>\n        {post.title}\n      </div>\n\n      {!isSelected ? (\n        <button\n          type=\"button\"\n          className=\"PostsList__button button\"\n          onClick={() => setSelectedPostId(post.id)}\n        >\n          Open\n        </button>\n      ) : (\n        <button\n          type=\"button\"\n          className=\"PostsList__button button\"\n          onClick={() => setSelectedPostId(0)}\n        >\n          Close\n        </button>\n      )}\n    </>\n  );\n};\n","import React from 'react';\nimport { PostRenderer } from '../PostRenderer';\nimport './PostsList.scss';\n\ninterface Props {\n  posts: Post[],\n  setSelectedPostId: React.Dispatch<React.SetStateAction<number>>,\n  selectedPostId: number,\n}\n\nexport const PostsList: React.FC<Props> = ({ posts, setSelectedPostId, selectedPostId }) => {\n  return (\n    <div className=\"PostsList\">\n      <h2>Posts:</h2>\n\n      <ul className=\"PostsList__list\">\n        {posts.map(post => (\n          post && (\n            <li key={post.id} className=\"PostsList__item\">\n              <PostRenderer\n                post={post}\n                isSelected={post.id === selectedPostId}\n                setSelectedPostId={setSelectedPostId}\n              />\n            </li>\n          )))}\n      </ul>\n    </div>\n  );\n};\n","export const deleteComment = async (commentId: number) => {\n  const COMMENT_URL = `https://mate.academy/students-api/comments/${commentId}`;\n\n  fetch(COMMENT_URL, { method: 'DELETE' });\n};\n\nexport const addComment = async (comment: ServerComment) => {\n  const COMMENTS_URL = 'https://mate.academy/students-api/comments';\n  const options = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json; charset=UTF-8',\n    },\n    body: JSON.stringify(comment),\n  };\n\n  await fetch(COMMENTS_URL, options);\n};\n","export const BASE_URL = 'https://mate.academy/students-api';\n","/* eslint-disable no-console */\nimport { BASE_URL } from './api';\n\nexport const getUserPosts = async (userId: number) => {\n  let ADDITIONAL_URL: string;\n\n  if (userId) {\n    ADDITIONAL_URL = `/posts?userId=${userId}`;\n  } else {\n    ADDITIONAL_URL = '/posts';\n  }\n\n  const response = await fetch(`${BASE_URL}${ADDITIONAL_URL}`);\n\n  return response.json();\n};\n\nexport const getPostDetails = async (postId: number) => {\n  if (!postId) {\n    return postId;\n  }\n\n  const response = await fetch(`${BASE_URL}/posts?id=${postId}`);\n\n  return response.json();\n};\n\nexport const getPostComments = async (postId: number) => {\n  if (!postId) {\n    return [];\n  }\n\n  try {\n    const response = await fetch(`${BASE_URL}/comments?postId=${postId}`);\n\n    return await response.json();\n  } catch (error) {\n    console.error(error);\n\n    return [];\n  }\n};\n","/* eslint-disable no-console */\nimport React, { useState, useEffect } from 'react';\nimport { deleteComment } from '../../api/comments';\nimport { getPostComments } from '../../api/posts';\n\ninterface Props {\n  postId: number,\n  showComments: boolean,\n}\n\nexport const PostComments: React.FC<Props> = ({ postId, showComments }) => {\n  const [comments, setComments] = useState<ServerComment[]>([]);\n\n  useEffect(() => {\n    async function fetchData() {\n      const fetchedComments = await getPostComments(postId);\n\n      setComments(fetchedComments);\n    }\n\n    fetchData();\n  }, [comments]);\n\n  if (!showComments) {\n    return <div>Comments are hidden</div>;\n  }\n\n  return (\n    <>\n      {comments.length !== 0 ? (\n        comments.map(comment => (\n          <li key={comment.id} className=\"PostDetails__list-item\">\n            <button\n              type=\"button\"\n              className=\"PostDetails__remove-button button\"\n              onClick={() => deleteComment(comment.id)}\n            >\n              X\n            </button>\n            <p>{comment.body}</p>\n          </li>\n        ))\n      ) : (\n        <div>No comments</div>\n      )}\n    </>\n  );\n};\n","import React, { useState } from 'react';\nimport { addComment } from '../../api/comments';\nimport './NewCommentForm.scss';\n\ninterface Props {\n  postId: number,\n}\n\nexport const NewCommentForm: React.FC<Props> = ({ postId }) => {\n  const emptyComment: ServerComment = {\n    name: '',\n    email: '',\n    body: '',\n    id: 2,\n    postId,\n  };\n\n  const [comment, setComment] = useState<ServerComment>(emptyComment);\n\n  const handleInput = (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = event.target;\n\n    setComment({\n      ...comment,\n      [name]: value,\n    });\n  };\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n    addComment(comment);\n    setComment(emptyComment);\n  };\n\n  return (\n    <form className=\"NewCommentForm\" onSubmit={handleSubmit}>\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Your name\"\n          className=\"NewCommentForm__input\"\n          value={comment.name}\n          onChange={handleInput}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"email\"\n          placeholder=\"Your email\"\n          className=\"NewCommentForm__input\"\n          value={comment.email}\n          onChange={handleInput}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          placeholder=\"Type comment here\"\n          className=\"NewCommentForm__input\"\n          value={comment.body}\n          onChange={handleInput}\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        className=\"NewCommentForm__submit-button button\"\n      >\n        Add a comment\n      </button>\n    </form>\n  );\n};\n","/* eslint-disable no-console */\nimport React, { useEffect, useState } from 'react';\nimport { PostComments } from '../PostComments';\nimport { NewCommentForm } from '../NewCommentForm';\nimport './PostDetails.scss';\nimport { getPostDetails } from '../../api/posts';\n\ninterface Props {\n  postId: number,\n}\n\nexport const PostDetails: React.FC<Props> = ({ postId }) => {\n  const [showComments, setShowComments] = useState(true);\n  const [post, setPost] = useState<Post | null>(null);\n\n  useEffect(() => {\n    (async function fetchData() {\n      const fetchedPost = await getPostDetails(postId);\n\n      setPost(fetchedPost ? fetchedPost[0] : null);\n    }());\n  }, [postId]);\n\n  const handleClick = () => setShowComments(!showComments);\n\n  return (\n    post ? (\n      <div className=\"PostDetails\">\n        <h2>Post details:</h2>\n\n        <section className=\"PostDetails__post\">\n          <p>{post.body}</p>\n        </section>\n\n        <section className=\"PostDetails__comments\">\n          <button\n            type=\"button\"\n            className=\"button\"\n            onClick={handleClick}\n          >\n            {showComments ? 'Hide comments' : 'Show comments'}\n          </button>\n\n          <ul className=\"PostDetails__list\">\n            <PostComments postId={postId} showComments={showComments} />\n          </ul>\n        </section>\n\n        <section>\n          <div className=\"PostDetails__form-wrapper\">\n            <NewCommentForm postId={post.id} />\n          </div>\n        </section>\n      </div>\n    ) : (\n      <div>No post selected</div>\n    )\n  );\n};\n","import { BASE_URL } from './api';\n\nexport const getUsers = async () => {\n  const response = await fetch(`${BASE_URL}/users`);\n\n  return response.json();\n};\n","/* eslint-disable jsx-a11y/label-has-associated-control */\nimport React, { useState, useEffect } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\nimport { getUserPosts } from './api/posts';\nimport { getUsers } from './api/users';\n\nconst App: React.FC = () => {\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [users, setUsers] = useState<User[]>([]);\n  const [userId, setUserId] = useState(0);\n  const [selectedPostId, setSelectedPostId] = useState(0);\n\n  useEffect(() => {\n    (async function fetchData() {\n      const [fetchedPosts, fetchedUsers] = await Promise.all([\n        getUserPosts(userId),\n        getUsers(),\n      ]);\n\n      setPosts(fetchedPosts);\n      setUsers(fetchedUsers);\n    }());\n  }, [userId, selectedPostId]);\n\n  const handleChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    setUserId(+event.target.value);\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App__header\">\n        <label>\n          Select a user: &nbsp;\n\n          <select\n            className=\"App__user-selector\"\n            value={`${userId}`}\n            onChange={handleChange}\n          >\n            <option key=\"0\" value=\"\">All users</option>\n            {users.map(user => (\n              <option\n                key={user.id}\n                value={user.id}\n              >\n                {user.name}\n              </option>\n            ))}\n          </select>\n        </label>\n      </header>\n\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          <PostsList\n            posts={posts}\n            setSelectedPostId={setSelectedPostId}\n            selectedPostId={selectedPostId}\n          />\n        </div>\n\n        <div className=\"App__content\">\n          <PostDetails\n            postId={selectedPostId}\n          />\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}